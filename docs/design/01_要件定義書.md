# 要件定義書

## Tascal（タスカル） - 社員タスク管理・カレンダーアプリケーション

| 項目 | 内容 |
|------|------|
| ドキュメントID | REQ-001 |
| バージョン | 1.0 |
| 作成日 | 2026-02-26 |
| プロジェクト名 | SVN Dashboard App (Tascal) |
| ステータス | 初版 |

---

## 1. プロジェクト概要

### 1.1 プロジェクトの目的

本プロジェクトは、社員のタスク管理・カレンダースケジューリングを一元的に行うWebアプリケーション「Tascal」を開発することを目的とする。従業員の予定管理、設備・施設予約、勤怠管理、チーム管理、社内ナレッジ共有など、社内業務を効率化するための統合プラットフォームを提供する。

### 1.2 プロジェクトの背景

- 社員の予定管理が分散しており、スケジュール調整に時間がかかっている
- 設備・施設の予約管理が手動で行われており、ダブルブッキングが発生している
- 社内のナレッジが属人化しており、共有の仕組みが不十分
- 勤怠や出社/リモート勤務の状況が把握しにくい

### 1.3 スコープ

本アプリケーションは以下の業務範囲をカバーする。

| 区分 | 対象範囲 |
|------|----------|
| 対象ユーザー | 社内全従業員 |
| 対象デバイス | PC（Webブラウザ） |
| 対象業務 | カレンダー管理、ユーザー管理、設備管理、施設管理、勤怠管理、チーム管理、Wiki、経費管理、ランチシャッフル、祝日管理、売上管理 |

---

## 2. システム要件

### 2.1 機能要件

#### FR-001: ユーザー認証・認可

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-001-01 | メールアドレスとパスワードによるユーザー登録ができること | 必須 |
| FR-001-02 | メールアドレスとパスワードによるログインができること | 必須 |
| FR-001-03 | パスワードリセットメールを送信できること | 必須 |
| FR-001-04 | メールアドレスの変更と確認ができること | 必須 |
| FR-001-05 | 未認証ユーザーはサインインページにリダイレクトされること | 必須 |
| FR-001-06 | 管理者権限（admin）の判定ができること | 必須 |
| FR-001-07 | 無効なユーザー（inactive）は自動ログアウトされること | 必須 |

#### FR-002: カレンダー管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-002-01 | 日別・週別・月別の3つのカレンダービューを切り替えられること | 必須 |
| FR-002-02 | 予定の新規登録ができること | 必須 |
| FR-002-03 | 予定の編集ができること | 必須 |
| FR-002-04 | 予定の削除ができること（単一、全件、指定日以降、指定日以前） | 必須 |
| FR-002-05 | 単日予定・範囲指定予定・繰り返し予定の3種類を登録できること | 必須 |
| FR-002-06 | 繰り返し予定は「毎日」「平日」「毎週」「毎月」「毎年」「カスタム」のパターンに対応すること | 必須 |
| FR-002-07 | 繰り返し予定の終了条件を「終了なし」「終了日指定」「回数指定」から選択できること | 必須 |
| FR-002-08 | 予定の参加者として社員・施設・設備を紐付けられること | 必須 |
| FR-002-09 | 予定のコンフリクト（時間・リソース重複）を検出できること | 必須 |
| FR-002-10 | 週別ビューでは全ユーザーの予定を表示すること | 必須 |
| FR-002-11 | 月別・日別ビューではログインユーザーの予定のみ表示すること | 必須 |
| FR-002-12 | カレンダーの表示位置を保持し、画面遷移後も復元できること | 希望 |
| FR-002-13 | プライベートイベントは参加者以外にはマスクして表示すること | 必須 |
| FR-002-14 | ユーザーごとの表示/非表示を切り替えられること | 希望 |
| FR-002-15 | 祝日をカレンダー上に表示すること | 必須 |

#### FR-003: ユーザー管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-003-01 | ユーザーの一覧表示ができること | 必須 |
| FR-003-02 | ユーザーの新規登録ができること | 必須 |
| FR-003-03 | ユーザーの詳細情報を表示できること | 必須 |
| FR-003-04 | ユーザー情報の編集ができること | 必須 |
| FR-003-05 | ユーザーのプロフィール情報（氏名、英語名、メール、電話番号、部署、権限、ステータス、自己紹介、アバター等）を管理できること | 必須 |
| FR-003-06 | ユーザーの権限は admin / user / viewer の3種類であること | 必須 |
| FR-003-07 | ユーザーのステータスは active / inactive の2種類であること | 必須 |

#### FR-004: 施設管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-004-01 | 施設の一覧・新規登録・詳細表示・編集ができること | 必須 |
| FR-004-02 | 施設情報は名称、コード、説明、定員、カテゴリ、画像、ステータスを含むこと | 必須 |
| FR-004-03 | 施設のステータスは available / in_use / maintenance の3種類であること | 必須 |

#### FR-005: 設備管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-005-01 | 設備の一覧・新規登録・詳細表示・編集ができること | 必須 |
| FR-005-02 | 設備情報は名称、コード、説明、数量、カテゴリ、画像、ステータスを含むこと | 必須 |
| FR-005-03 | 設備のステータスは available / in_use / maintenance の3種類であること | 必須 |

#### FR-006: チーム管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-006-01 | チームの一覧・新規登録・詳細表示・編集ができること | 必須 |
| FR-006-02 | チームにメンバーを紐付けられること | 必須 |
| FR-006-03 | チーム情報は名称、コード、説明、カテゴリ、画像、ステータス、メンバーリストを含むこと | 必須 |

#### FR-007: 部署（セクション）管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-007-01 | 部署の一覧・新規登録・詳細表示・編集ができること | 必須 |
| FR-007-02 | 部署情報は名称、コード、説明、カテゴリ、画像、ステータスを含むこと | 必須 |

#### FR-008: Wiki（ナレッジベース）

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-008-01 | Wiki記事の一覧・新規作成・詳細表示・編集ができること | 必須 |
| FR-008-02 | Markdownエディタによる記事作成ができること | 必須 |
| FR-008-03 | 記事にカテゴリ・タグを設定できること | 必須 |
| FR-008-04 | カテゴリ・タグによる記事のフィルタリングができること | 必須 |
| FR-008-05 | 記事のステータスは published / draft / archived の3種類であること | 必須 |
| FR-008-06 | 記事のバージョン管理（履歴）ができること | 希望 |
| FR-008-07 | 記事の閲覧数を記録できること | 希望 |

#### FR-009: 勤怠管理（日別オプション）

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-009-01 | 日別の勤務形態（出社/リモート/外出/休暇/未定）を登録できること | 必須 |
| FR-009-02 | 日別のランチ参加状況（参加/不参加/未定）を登録できること | 必須 |
| FR-009-03 | 日別の夕食参加状況（参加/不参加/未定）を登録できること | 必須 |
| FR-009-04 | 一定期間内の全ユーザーの日別オプションを一覧表示できること | 必須 |

#### FR-010: ランチシャッフル

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-010-01 | 参加者をランダムにチーム分けできること | 必須 |
| FR-010-02 | シャッフル結果を保存・表示できること | 必須 |

#### FR-011: 祝日管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-011-01 | 会社独自の祝日を登録・管理できること | 必須 |
| FR-011-02 | カレンダー表示に祝日情報を反映できること | 必須 |

#### FR-012: 経費管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-012-01 | 経費の登録・管理ができること | 希望 |

#### FR-013: 売上管理

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-013-01 | 売上データをグラフで可視化できること | 希望 |

#### FR-014: CSVインポート/エクスポート

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-014-01 | Firestoreデータのcsv出力ができること | 希望 |
| FR-014-02 | CSVファイルからFirestoreへデータをインポートできること | 希望 |

#### FR-015: その他

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-015-01 | サイドバーメニューからの画面遷移ができること | 必須 |
| FR-015-02 | メニューのロールベースアクセス制御ができること | 必須 |
| FR-015-03 | マニュアル・ヘルプページの表示ができること | 希望 |

### 2.2 非機能要件

#### NFR-001: パフォーマンス

| ID | 要件 | 目標値 |
|----|------|--------|
| NFR-001-01 | 初回データロード時間 | 3秒以内 |
| NFR-001-02 | キャッシュ利用時のデータロード時間 | 1.5秒以内 |
| NFR-001-03 | 初回Firestoreクエリ数 | 3〜4クエリ以内 |
| NFR-001-04 | 月別・日別ビューのデータ転送量削減率 | 90%以上 |

#### NFR-002: セキュリティ

| ID | 要件 |
|----|------|
| NFR-002-01 | Firebase Authenticationによるユーザー認証を必須とすること |
| NFR-002-02 | Firestoreのセキュリティルールにより認証済みユーザーのみアクセス可能とすること |
| NFR-002-03 | HTMLサニタイズ処理（DOMPurify）による XSS対策を行うこと |
| NFR-002-04 | プライベートイベントの情報は参加者以外に開示しないこと |

#### NFR-003: 可用性

| ID | 要件 |
|----|------|
| NFR-003-01 | Firebase Hostingのマネージドサービスにより高可用性を確保すること |
| NFR-003-02 | エラー発生時にキャッシュからのフォールバック表示ができること |

#### NFR-004: 運用・保守性

| ID | 要件 |
|----|------|
| NFR-004-01 | TypeScriptによる型安全なコードを維持すること |
| NFR-004-02 | コンポーネントベースアーキテクチャにより保守性を確保すること |
| NFR-004-03 | Firestoreクエリプロファイリング機能によるパフォーマンス監視ができること |

#### NFR-005: 対応環境

| ID | 要件 |
|----|------|
| NFR-005-01 | モダンブラウザ（Chrome、Firefox、Safari、Edge）の最新バージョンで動作すること |
| NFR-005-02 | タイムゾーンは Asia/Tokyo を基準とすること |
| NFR-005-03 | UI言語は日本語とすること |

---

## 3. ユースケース一覧

### 3.1 カレンダー管理

| UC-ID | ユースケース名 | アクター | 概要 |
|-------|---------------|---------|------|
| UC-001 | カレンダーを閲覧する | 全ユーザー | 日別/週別/月別ビューでカレンダーを閲覧する |
| UC-002 | 予定を登録する | 全ユーザー | 新規予定（単日/範囲/繰り返し）を登録する |
| UC-003 | 予定を編集する | 全ユーザー | 既存の予定の内容を変更する |
| UC-004 | 予定を削除する | 全ユーザー | 既存の予定を削除する（削除オプション選択可） |
| UC-005 | コンフリクトを確認する | 全ユーザー | 予定登録時に時間・リソースの重複を確認する |

### 3.2 マスター管理

| UC-ID | ユースケース名 | アクター | 概要 |
|-------|---------------|---------|------|
| UC-006 | ユーザーを管理する | 管理者 | ユーザーのCRUD操作を行う |
| UC-007 | 施設を管理する | 管理者 | 施設のCRUD操作を行う |
| UC-008 | 設備を管理する | 管理者 | 設備のCRUD操作を行う |
| UC-009 | チームを管理する | 管理者 | チームのCRUD操作を行う |
| UC-010 | 部署を管理する | 管理者 | 部署のCRUD操作を行う |

### 3.3 その他

| UC-ID | ユースケース名 | アクター | 概要 |
|-------|---------------|---------|------|
| UC-011 | Wiki記事を管理する | 全ユーザー | Wiki記事の作成・編集・閲覧を行う |
| UC-012 | 勤怠情報を登録する | 全ユーザー | 日別の勤務形態・参加状況を登録する |
| UC-013 | ランチシャッフルを行う | 全ユーザー | 参加者のランダムチーム分けを実行する |
| UC-014 | 祝日を管理する | 管理者 | 会社祝日の登録・管理を行う |

---

## 4. 用語集

| 用語 | 説明 |
|------|------|
| Tascal | 本アプリケーションの名称（Task + Calendar の造語） |
| イベント | カレンダーに登録される予定 |
| マスターイベント | 繰り返し予定・範囲指定予定の親レコード |
| イベントインスタンス | 繰り返し予定から生成される個別の予定 |
| DateType | 予定の日付種別（single / range / recurring） |
| CalendarView | カレンダーの表示形式（daily / weekly / monthly） |
| WorkStyle | 勤務形態（office / remote / out / vacation / pending） |
| マスターデータ | ユーザー、施設、設備、祝日等の基本データ |
| TTLキャッシュ | Time To Live（有効期間）付きのキャッシュ機構 |

---

## 5. 制約条件

| 項目 | 制約 |
|------|------|
| バックエンド | Firebase（Firestore、Authentication、Storage、Functions）を使用すること |
| フロントエンド | Nuxt 3 + Vue 3 + Vuetify 3 を使用すること |
| デプロイ環境 | Firebase Hosting を使用すること |
| データベース | Cloud Firestore（NoSQL）を使用すること |
| リージョン | asia-northeast1（東京）を使用すること |
| SSR | 無効（CSR: クライアントサイドレンダリングのみ） |

---

## 6. 前提条件

- 利用者は社内ネットワークまたはインターネット経由でアクセスする
- 利用者にはFirebase Authenticationのアカウントが事前に発行される
- モダンブラウザの利用を前提とする（IE非対応）
- 日本語UIのみ対応（多言語対応は行わない）
