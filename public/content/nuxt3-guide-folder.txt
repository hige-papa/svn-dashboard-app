# 📖 Nuxt 3の歩き方：主要ディレクトリ完全ガイド

Nuxt 3での開発を始めたばかりのあなたが、最初に目にするのが自動生成されたいくつかのファイルとディレクトリ。
「このフォルダは何のためにあるの？」「どこに何を書けばいいの？」
そんな疑問を解決するために、Nuxt 3の心臓部とも言える主要なディレクトリ構造を一つひとつ丁寧に解説していきます。このガイドを読めば、あなたのプロジェクトはもっと整理され、開発効率が格段にアップするはずです！

-----

## Nuxt 3のディレクトリ構造：規約の力

Nuxt 3の大きな特徴は「**規約（Convention）**」です。決められた名前のディレクトリにファイルを作成するだけで、Nuxtが自動的に必要な設定や読み込みを行ってくれます。これにより、私たちは面倒な設定作業から解放され、本当に集中すべきアプリケーションのロジック開発に時間を使えるのです。

それでは、主要なディレクトリを一つずつ見ていきましょう。

## 📁 `components` - 再利用可能な部品庫

  * **役割:** アプリケーション内で繰り返し利用するUI部品（Vueコンポーネント）を格納します。例えば、ボタン、カード、モーダルウィンドウなどです。
  * **特徴:** このディレクトリに置かれたコンポーネントは**自動的にインポート**されます。つまり、`import`文を書かなくても、テンプレート内のどこでもいきなりコンポーネント名（例: `<TheHeader />`）を記述するだけで使えます。
  * **使い方:**
      * `components/`
          * `Button.vue`
          * `Card.vue`
          * `Header/TheHeader.vue` (サブディレクトリで整理することも可能)

## 📁 `pages` - 自動でページを作る魔法の箱

  * **役割:** アプリケーションのページとルーティングを定義します。
  * **特徴:** **ファイルベースルーティング**の核となるディレクトリです。ここにVueファイルを作成すると、そのファイル名に基づいたURLが自動で生成されます。
  * **使い方:**
      * `pages/index.vue` → `/`
      * `pages/about.vue` → `/about`
      * `pages/users/[id].vue` → `/users/1`, `/users/2` (動的なルーティング)
      * `pages/users/index.vue` → `/users`

## 📁 `layouts` - サイトの骨格デザイナー

  * **役割:** サイト全体の共通レイアウト（ヘッダー、フッター、サイドバーなど）を定義します。

  * **特徴:** `layouts/default.vue`を作成すると、全てのページにデフォルトでそのレイアウトが適用されます。特定のページだけ違うレイアウトにしたい場合は、ページ側で指定することも可能です。

  * **使い方:**

      * `layouts/default.vue`を作成し、`<slot />`を記述します。この`<slot />`の部分に、各ページコンポーネントの内容が描画されます。

    <!-- end list -->

    ```vue
    <template>
      <div>
        <TheHeader />
        <main>
          <slot />
        </main>
        <TheFooter />
      </div>
    </template>
    ```

## 📁 `composables` - 再利用可能なロジック集

  * **役割:** Vue 3のComposition APIを使った再利用可能なロジック（関数）を格納します。

  * **特徴:** `components`と同様に、このディレクトリに置かれた関数は**自動的にインポート**されます。`use`で始まる名前を付けるのが慣例です（例: `useCounter`）。

  * **使い方:** データ取得ロジック、状態管理ロジックなど、コンポーネントをまたいで使いたい処理をここにまとめます。

    ```javascript
    // composables/useMyFetch.js
    export const useMyFetch = (url) => {
      const { data, error } = useFetch(url);
      // ...共通の処理...
      return { data, error };
    };
    ```

## 📁 `assets` - ビルドされる静的ファイル

  * **役割:** Viteやwebpackによってビルド処理される静的アセット（画像、CSS、フォントなど）を配置します。

  * **特徴:** ここに置かれたファイルは、ビルド時に最適化（圧縮など）され、一意のハッシュ付きURLが割り当てられます。CSSから`url()`で参照したり、テンプレート内で直接パスを指定して使用します。

  * **使い方:**

      * `<img src="~/assets/image.png">`
      * `background-image: url('~/assets/background.jpg');`

    ※注意: `public`ディレクトリとの違いを理解することが重要です。`public`に置かれたファイルは、ビルド処理されず、そのままのパスでルートに配置されます。

## 📁 `plugins` - アプリ起動時の初期設定

  * **役割:** Vueアプリケーションが作成される際に実行したい処理を定義します。

  * **特徴:** 外部ライブラリの初期化や、アプリケーション全体で利用可能なヘルパー関数の登録などに使います。ファイル名に`.client`や`.server`という接尾辞を付けることで、クライアント側またはサーバー側でのみ実行するプラグインを作成できます。

  * **使い方:** `defineNuxtPlugin`関数を使ってプラグインを定義します。

    ```javascript
    // plugins/my-plugin.client.js
    export default defineNuxtPlugin(nuxtApp => {
      // クライアント側でのみ実行される
      console.log('プラグインが実行されました！');
    });
    ```

## 📁 `middleware` - ページの門番

  * **役割:** ページがレンダリングされる前に実行される処理（ミドルウェア）を定義します。

  * **特徴:** ログイン状態のチェックや、特定の権限を持つユーザーのみアクセスを許可する、といったルートのガード処理に最適です。

  * **使い方:** `defineNuxtRouteMiddleware`関数を使って定義し、ページ側で`definePageMeta`を使って適用します。

    ```javascript
    // middleware/auth.js
    export default defineNuxtRouteMiddleware((to, from) => {
      const isLoggedIn = false; // 実際には認証状態をチェック
      if (!isLoggedIn) {
        return navigateTo('/login');
      }
    });
    ```

## 📁 `types` - 型定義の保管庫

  * **役割:** プロジェクト全体で使用するTypeScriptの型定義を置きます。
  * **特徴:** ここに置かれた型定義は、自動で読み込まれ、プロジェクト全体で利用可能になります。APIのレスポンスの型や、複雑なオブジェクトの型などを定義するのに便利です。
  * **使い方:** `types/index.d.ts`のようなファイルを作成し、型を`export`または`declare`します。

-----

## まとめ

これらのディレクトリの役割を理解することで、Nuxt 3の「規約の力」を最大限に引き出し、クリーンでメンテナンス性の高いアプリケーションを構築できます。最初はどこに何を書くか迷うかもしれませんが、このガイドを参考にしながら、まずは手を動かしてみてください。きっとNuxt 3での開発がもっと楽しく、快適になるはずです！